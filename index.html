<html>
  <head>
    <script type="text/javascript">

      var DECKS_LIST = [
        {
          "name":"Orichalcos (Emanuele)",
          "cards":[
            { "type": "deck", "name":"orichalcos_magician_apprendice", "amount":2},
            { "type": "deck", "name":"Terror of Atlantis", "amount":1},
            { "type": "deck", "name":"burning_will_for_the_seal", "amount":2},
            { "type": "deck", "name":"arrogance_of_orichalcos", "amount":2},
            { "type": "deck", "name":"attack_guidance_barrier", "amount":2},
            { "type": "deck", "name":"call_of_the_orichalcos_servant", "amount":2},
            { "type": "deck", "name":"divine_basilisk_geh", "amount":1},
            { "type": "deck", "name":"eternal_divine_wrath", "amount":1},
            { "type": "deck", "name":"impudence_of_orichalcos", "amount":2},
            { "type": "deck", "name":"light_barrier_of_the_stolen_souls", "amount":2},
            { "type": "deck", "name":"mirror_knight_calling", "amount":1},
            { "type": "token", "name":"mirror_knight_token", "amount":4},
            { "type": "deck", "name":"orichalcos_aristeros", "amount":1},
            { "type": "deck", "name":"orichalcos_dexia", "amount":1},
            { "type": "deck", "name":"orichalcos_deuteros", "amount":1},
            { "type": "deck", "name":"orichalcos_gigas", "amount":1},
            { "type": "deck", "name":"orichalcos_kiseichu", "amount":1},
            { "type": "deck", "name":"orichalcos_kynerza", "amount":2},
            { "type": "deck", "name":"orichalcos_malevolence", "amount":2},
            { "type": "deck", "name":"orichalcos_kyutora", "amount":1},
            { "type": "deck", "name":"orichalcos_magic_stone", "amount":2},
            { "type": "deck", "name":"orichalcos_magician", "amount":2},
            { "type": "deck", "name":"orichalcos_magician_girl", "amount":2},
            { "type": "deck", "name":"orichalcos_magnetia", "amount":2},
            { "type": "deck", "name":"orichalcos_matia", "amount":2},
            { "type": "deck", "name":"orichalcos_mirror", "amount":1},
            { "type": "deck", "name":"orichalcos_punos", "amount":2},
            { "type": "deck", "name":"orichalcos_shunoros", "amount":1},
            { "type": "deck", "name":"orichalcos_tritos", "amount":1},
            { "type": "deck", "name":"sword_of_sealing", "amount":2},
            { "type": "token", "name":"sentinel_token", "amount":9},
            { "type": "deck", "name":"the_seal_of_orichalcos", "amount":1},
            { "type": "extra", "name":"sealed_sacred_tree", "amount":2},
            { "type": "extra", "name":"orichalcos_true_form", "amount":1},
            { "type": "extra", "name":"orichalcos_talisman_trader", "amount":1},
            { "type": "extra", "name":"orichalcos_last_defender", "amount":2},
            { "type": "extra", "name":"orichalcos_golem", "amount":2},
            { "type": "extra", "name":"orichalcos_eva", "amount":1},
            { "type": "extra", "name":"gizonda_curse_of_the_diferent_dimention", "amount":1},
            { "type": "extra", "name":"fossil_dragon_orichalcos", "amount":1},
            { "type": "extra", "name":"orichalcos_ancient_soldier", "amount":1},
            { "type": "extra", "name":"orichalcos_chimera_blaze", "amount":2},
            { "type": "extra", "name":"levonia_the_orichalcos_chaos_prince", "amount":1},
          ]
        },
        {
          "name":"BlueEyes (Tobs)",
          "cards":[
            { "type": "deck", "name":"Deep eyes white dragon", "amount":2},
            { "type": "deck", "name":"Blue eyes white dragon", "amount":3},
            { "type": "deck", "name":"Blue-Eyes Alternative White Dragon", "amount":3},
            { "type": "deck", "name":"Blue-Eyes Abiss Dragon", "amount":2},
            { "type": "deck", "name":"Dragon spirit of white", "amount":1},
            { "type": "deck", "name":"The White Stone of Ancients", "amount":3},
            { "type": "deck", "name":"The White Stone of Legend", "amount":2},
            { "type": "deck", "name":"Sage with Eyes of Blue", "amount":3},
            { "type": "deck", "name":"Return of the Dragon Lords", "amount":3},
            { "type": "deck", "name":"Polymerization", "amount":2},
            { "type": "deck", "name":"Pot of Desires", "amount":2},
            { "type": "deck", "name":"Trade in", "amount":2},
            { "type": "deck", "name":"Cards of Consonance", "amount":2},
            { "type": "deck", "name":"Dragon Shrine", "amount":3},
            { "type": "deck", "name":"The Melody of Awakening Dragon", "amount":3},
            { "type": "deck", "name":"Mystical space typhoon", "amount":2},
            { "type": "deck", "name":"Silver's Cry", "amount":2},
            { "type": "extra", "name":"Blue eyes alternative ultimate dragon", "amount":1},
            { "type": "extra", "name":"Neo Blue-Eyes Ultimate Dragon", "amount":1},
            { "type": "extra", "name":"Blue-Eyes Twin Burst Dragon", "amount":2},
            { "type": "extra", "name":"Azure eyes silver dragon", "amount":2},
            { "type": "extra", "name":"Blue-Eyes Spirit Dragon", "amount":2},
            { "type": "extra", "name":"Shooting Riser Dragon", "amount":1},
            { "type": "extra", "name":"Number 46 Dragluon", "amount":1},
            { "type": "extra", "name":"Galaxy-Eyes Cipher Blade Dragon", "amount":1},
            { "type": "extra", "name":"Galaxy-Eyes Full Armor Photon Dragon", "amount":1},
            { "type": "extra", "name":"Galaxy-Eyes Cipher Dragon", "amount":1},
            { "type": "extra", "name":"Number 38 Hope Harbinger Dragon Titanic Galaxy", "amount":1},
            { "type": "extra", "name":"Linkuriboh", "amount":1},
          ]
        },
        {
          "name":"RedEyes (Tobs)",
          "cards":[
            { "type": "deck", "name":"dark_magician", "amount":2},
            { "type": "deck", "name":"red_eyes_black_dragon", "amount":3},
            { "type": "deck", "name":"red_eyes_darkness_metal_dragon", "amount":1},
            { "type": "deck", "name":"red_eyes_alternative_black_dragon", "amount":3},
            { "type": "deck", "name":"tenyi_spirit_vishuda", "amount":3},
            { "type": "deck", "name":"red_eyes_retro_dragon", "amount":2},
            { "type": "deck", "name":"red_eyes_baby_dragon", "amount":2},
            { "type": "deck", "name":"black_metal_dragon", "amount":3},
            { "type": "deck", "name":"the_black_stone_of_legend", "amount":3},
            { "type": "deck", "name":"red_eyes_fusion", "amount":3},
            { "type": "deck", "name":"cards_of_the_red_stone", "amount":3},
            { "type": "deck", "name":"the_claws_of_hermos", "amount":2},
            { "type": "deck", "name":"inferno_fire_blast", "amount":3},
            { "type": "deck", "name":"red_eyes_insight", "amount":3},
            { "type": "deck", "name":"red_eyes_spirit", "amount":3},
            { "type": "deck", "name":"red_eyes_fang_with_chain", "amount":3},
            { "type": "deck", "name":"return_of_the_red_eyes", "amount":3},
            { "type": "deck", "name":"red_eyes_burn", "amount":2},
            { "type": "deck", "name":"eternal_soul", "amount":1},
            { "type": "extra", "name":"meteor_black_comet_dragon", "amount":1},
            { "type": "extra", "name":"red_eyes_dark_dragoon", "amount":2},
            { "type": "extra", "name":"red_eyes_black_dragon_sword", "amount":2},
            { "type": "extra", "name":"red_eyes_flare_metal_dragon", "amount":2},
            { "type": "extra", "name":"mecha_phantom_beast_dracossack", "amount":1},
            { "type": "extra", "name":"number_11_big_Eye", "amount":1},
            { "type": "extra", "name":"saryuja_skull_dread", "amount":1},
            { "type": "extra", "name":"darkness_metal_the_dragon_of_dark_steel", "amount":1},
            { "type": "extra", "name":"bujinki_ahashima", "amount":1},
            { "type": "extra", "name":"wee_witchs_apprentice", "amount":1},
            { "type": "extra", "name":"Union Carrier", "amount":1},
            { "type": "extra", "name":"relinquished_anima", "amount":1},
          ]
        }
      ];

      var CARDS_COUNTER = 0;
      var PAGE = null;

      function addCard(cardPath, disable_backs){

        if(cardPath == "back.png" && disable_backs){
          return;
        }

        let horizMARGIN = "2.5%";
        let vertMARGIN = "2.6%";

        let img = document.createElement("img");
        img.style.width = "28%";
        img.src = "./Core_All_Cards/"+cardPath;
        img.style.marginTop = vertMARGIN;

        if(cardPath == "back.png")
        {
          img.style.transform = "scale(1.03)";
        }

        // FIRST ROW CARD
        if((CARDS_COUNTER/3)%3 == 0 || ((CARDS_COUNTER-1)/3)%3 == 0 || ((CARDS_COUNTER-2)/3)%3 == 0){
          img.style.marginTop = "7.5%";
        }


        // LEFT CARD
        if(CARDS_COUNTER%3 == 0){
          img.style.marginLeft = "5.55%";
        }
        // MIDDLE CARD
        if(CARDS_COUNTER%3 == 1){
          img.style.marginLeft = horizMARGIN;
          img.style.marginRight = horizMARGIN;
        }
        // RIGTH CARD
        if(CARDS_COUNTER%3 == 2){
          img.style.marginRight = horizMARGIN;
        }

        if(CARDS_COUNTER%9 == 0){
          PAGE = document.createElement("div");
          PAGE.id = "page " + ((CARDS_COUNTER/9) + 1).toString();
          PAGE.style.border = "1px solid";
          PAGE.style.overflow = "hidden";
          PAGE.style.width = (2480/2.2).toString() + "px";
          PAGE.style.height = (3508/2.2).toString() + "px";
          document.body.appendChild(PAGE);
        }

        PAGE.appendChild(img);

        /*
        if([0,1,2,15,16,17].indexOf(CARDS_COUNTER) == -1){
          img.style.opacity = "0";
        }
        */

        CARDS_COUNTER++;
      }

      function getDeckByName(deck_to_print){
        let deck = [];
        for(let i = 0; i < DECKS_LIST.length; i++){
          if(DECKS_LIST[i]["name"] == deck_to_print){
            deck = DECKS_LIST[i]["cards"];
          }
        }
        return deck;
      }

      function displayDeck(deck_to_print, disable_backs){

        document.body.style.margin = "0";

        let deck = getDeckByName(deck_to_print);

        if(deck == null || deck == undefined){
          alert("You selected a deck that does not exist in the list: "+ deck_to_print);
          return;
        }

        deck.sort((a,b)=>{
          if(a["name"] < b["name"]){ return -1;}
          if(a["name"] > b["name"]){ return 1;}
          return 0;
        });

        let cards = 0;
        let perfected_deck = [];
        for(let i = 0; i < deck.length; i++){
          for(let j = 0; j < deck[i]["amount"];j++){
            perfected_deck.push(deck[i]["name"]+".png");
            cards++;
            if(perfected_deck.length%9 == 0 && perfected_deck.length > 0){
              for(let k = 0; k < 9; k++){
                perfected_deck.push("back.png");
              }
            }
          }
        }


        let deck_padding_perfect = 9 - cards%9;
        if(deck_padding_perfect != 9){
          while(deck_padding_perfect > 0){
            perfected_deck.push("placeholder.png");
            deck_padding_perfect--;
          }
          for(let k = 0; k < 9; k++){
            perfected_deck.push("back.png");
          }
        }

        for(let i = 0; i < perfected_deck.length; i++){
          addCard(perfected_deck[i], disable_backs);
        }

      }

      function process_deck() {
        let deck_name = document.getElementById("chosen_id").value;
        let allow_backs = document.getElementById("allow_back_check").checked;
        while(document.body.firstChild){
          document.body.removeChild(document.body.firstChild);
        }
        displayDeck(deck_name, !allow_backs);
      }

      function deck_descr(deck_to_print){

        let deck = getDeckByName(deck_to_print);

        let count_deck = 0;
        let count_extra = 0;
        let count_tokens = 0;
        for(let i = 0; i < deck.length; i++){
          if(deck[i]["type"] == "deck"){
            count_deck+= deck[i]["amount"];
          }
          if(deck[i]["type"] == "extra"){
            count_extra+= deck[i]["amount"];
          }
          if(deck[i]["type"] == "token"){
            count_tokens+= deck[i]["amount"];
          }
        }

        return (deck_to_print + " Deck has the follwing structure (deck):" + count_deck  + " (extra deck): " + count_extra + " (tokens): " + count_tokens);

      }

      function tell_deck() {
        let deck_name = document.getElementById("chosen_id").value;
        let descr = deck_descr(deck_name);
        document.getElementById("description").innerHTML = descr;
      }

      function setup() {

        document.body.style.margin = "2rem";

        let title = document.createElement("div");
        title.innerHTML = "Pick the Premade Deck you want to print";

        let s = document.createElement("select");
        s.id = "chosen_id";
        s.style.minWidth = "15rem";
        s.onchange = tell_deck;
        for(let i = 0; i < DECKS_LIST.length; i++){
          let o = document.createElement("option");
          o.innerHTML = DECKS_LIST[i]["name"];
          o.value = DECKS_LIST[i]["name"];
          s.appendChild(o);
        }

        let b = document.createElement("button");
        b.onclick = process_deck;
        b.style.minWidth = "10rem";
        b.innerHTML = "Generate Deck";

        let descr = document.createElement("div");
        descr.id = "description";

        let labls = document.createElement("label");
        let check = document.createElement("input");
        check.type = "checkbox";
        check.id = "allow_back_check";
        let wrd = document.createElement("span");
        wrd.innerHTML = "Allow print for card-backs";
        labls.appendChild(check);
        labls.appendChild(wrd);

        document.body.appendChild(title);
        document.body.appendChild(document.createElement("br"));
        document.body.appendChild(s);
        document.body.appendChild(document.createElement("br"));
        document.body.appendChild(document.createElement("br"));
        document.body.appendChild(descr);
        document.body.appendChild(document.createElement("br"));
        document.body.appendChild(labls);
        document.body.appendChild(document.createElement("br"));
        document.body.appendChild(document.createElement("br"));
        document.body.appendChild(b);

        tell_deck();
    }

    </script>


  </head>
  <body onload="setup();" style="user-select:none;">
  </body>
</html>
